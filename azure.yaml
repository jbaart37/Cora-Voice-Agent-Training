# Azure Developer CLI Configuration
name: voice-agent-simulator
metadata:
  template: voice-agent-simulator@1.1.0

# Parameter definitions - these tell azd what parameters can be set in .env
parameters:
  environmentName:
    type: string
  location:
    type: string
  azureOpenAIEndpoint:
    type: string
  modelName:
    type: string
  resourceGroupName:
    type: string
    default: ""

infra:
  provider: bicep
  path: infra/main.bicep
  parameters:
    environmentName: ${environmentName}
    location: ${location}
    azureOpenAIEndpoint: ${azureOpenAIEndpoint}
    modelName: ${modelName}
    resourceGroupName: ${resourceGroupName}

services:
  web:
    language: python
    project: ./src
    host: containerapp
    docker:
      path: ./src/Dockerfile
      context: ./src

# Environment variable mappings for Bicep parameters
# These map azd environment variables to Bicep template parameters
hooks:
  postprovision:
    posix:
      shell: sh
      run: |
        echo "Deployment complete!"
    windows:
      shell: pwsh
      run: |
        Write-Host "Deployment complete!"
